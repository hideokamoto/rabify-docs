# rabify CDN とは
あなたのWebサイト/アプリの画像をお手軽に高速化できるサービスです。`rabify CDN`のURLを使うだけで、画像をリサイズして高速に配信することができるようになります。

## 1. 画像のリサイズ
`rabify CDN`を利用すると、オリジナルサイズの画像を1枚用意するだけで、何パターンでも必要に応じて縮小画像の生成を自動的に行うことができます。

レスポンシブデザインにより、breakpointを最低2つは用意するのは当たり前。プラスして、ディスプレイの高解像度化により、解像度1倍、2倍、3倍をそれぞれ用意することが求められることも多くなりました。

参考までにiPhone現行に求められる画像の解像度はこちらになります。

| 端末 | インチ | Retina |
|:-----------------|:------------------|:------------------|
| iPhone 7 / 8 | 4.7 | 2x |
| iPhone 7 Plus / 8 Plus | 5.5 | 3x |
| iPhone XR | 6.1 | 2x |
| iPhone X / XS | 5.8 | 3x |
| iPhone XS Max | 6.5 | 3x |

こうなると、breakpoint数 x 用意する解像度数の画像が必要になるので、シンプルな構成でも1画像あたり6パターン、複雑な構成だと1画像あたり12パターン、18パターン必要になる場合があります。__これを手動で用意するのは現実的ではありません。__

ぜひ、`rabify CDN`を利用してこの作業を自動化ください！
また、縮小画像は`rabify CDN`上に保存（キャッシュ）されますので、__サーバの容量を圧迫することもありません。__

## 2. 高速コンテンツ配信ネットワークによる配信
`rabify CDN`は高速コンテンツ配信ネットワーク（CDN）を利用しているので、ユーザに高パフォーマンスな画像配信を行うことができます。

高速コンテンツ配信ネットワークは、同一のコンテンツを多くの配布先に効率的に配布するための仕組みです。高速コンテンツ配信ネットワークを使わず、サーバからユーザに直接コンテンツを配信する場合、

- ユーザがどこにいても、サーバがある物理的な場所は同一。ユーザとサーバの距離が遠いほどにレスポンス速度が遅くなってしまう。
- 同時アクセスがたくさんあった場合、コンテンツ配信に時間がかかるようになってしまう。

という問題があります。しかし、高速コンテンツ配信ネットワークを使うと、このどちらもを解決することができます。

- __世界中26か国、59都市に接続ポイントを用意している__ Amazon CloudFrontを採用。ユーザに最も近いところから配信するので、距離による遅延は最小限です
- さらに1都市あたり複数の接続ポイントを用意しているので、同一都市から多くのアクセスがあった場合も高いスケーラビリティ、パフォーマンスを提供することができます。

その上で、サーバの負荷も軽減することができます。

## 3. キャッシュの利活用
`rabify CDN`では、リサイズした画像をサーバ上に置くことなく、`rabify CDN`上に置くので、それ以降はサーバの負荷軽減につながり、瞬間的に多数のアクセスがあった場合もサーバが処理不能に陥りにくくなります。

`HTTP 503 Service Unavailable`というエラーを見たことはありませんでしょうか。「サービスが利用できません」というエラーで、瞬間的に多数のアクセスがあり、サーバが処理不能に陥った時にでるエラーです。他にも、レンタルサーバの最大データ転送量を超過した場合などに表示されます。このような場合、Webサイト/アプリのサービス自体ができなくなってしまうので、ビジネス上大きな損害につながることが多々あります。`rabify CDN`を利用いただくと、そのようなことを引き起こすサーバ負荷を軽減することができます。

### ローカルキャッシュとブラウザキャッシュとの違い
`WP Super Cache` `W3 Total Cache`で実現できる「ローカルキャッシュ」や「ブラウザキャッシュ」との違いを簡単に説明しておきます。

#### ローカルキャッシュとは
ローカルキャッシュは、サーバ上にキャッシュをつくることができます。WordPressなど「動的サイト」は、アクセスの度にPHPが動き、コンテンツ(HTML)を生成してレスポンスします。

「PHPが動く = サーバスペックをそこに使っている」ことはレスポンス速度の低下はもちろんのこと、瞬間的に多数のアクセスがあった時にサーバが処理不能に陥る可能性が高くなります。ですので、ローカルキャッシュをつかって __PHPがつくったHTMLをサーバに保存して、次のアクセスではHTMLをそのまま返そう__ というのがローカルキャッシュです。

#### ブラウザキャッシュとは
ブラウザキャッシュは、配信したコンテンツをユーザのブラウザ上に保存することによって、二回目以降のアクセスを高速に表示することができるようになります。1ユーザのブラウザ上に保存されるので、他のユーザへの影響はありません。

なお、ブラウザキャッシュが更新されない場合、表示する内容が更新されないので「サーバではCSSを更新したのに、CSSが変わっていないユーザがいる」ということが起きたりします。

### `rabify CDN`の高速コンテンツ配信ネットワーク キャッシュ
`rabify CDN`が利用しているのは、「高速コンテンツ配信ネットワーク キャッシュ（CDN Cache）」といわれるキャッシュ方法で、ローカルキャッシュとブラウザキャッシュの中間のキャッシュ方法です。ユーザは高速コンテンツ配信ネットワークを経由してサーバにコンテンツのリクエストを行います。そうすると、1回目はサーバにアクセスしてコンテンツを取得しますが、その際にコンテンツは高速コンテンツ配信ネットワーク上に保存されますので、2回目以降にアクセスしたユーザはサーバにアクセスを行わず高速に配信されます。

ブラウザキャッシュと異なり、1回目にアクセスしたユーザと2回目にアクセスしたユーザが異なる場合も高速に配信されます。
